(()=>{var o=async t=>await(await fetch(t)).json(),g=(t,n)=>t.includes(n);function E(t){if(g(t,"."))return t=t.split("."),t[0]&&t[1]?t:!1}var s="ui_config.json";async function i(t){if(t=="css")return(await o(s)).dom_config.css;if(t=="script")return(await o(s)).dom_config.script;if(t=="font")return(await o(s)).dom_config.font;if(t=="init")return(await o(s)).ui_config.init;if(t=="nm")return(await o(s)).ui_config.namespace}function D(t){let n={rel:"stylesheet",href:t};document.head.append(Object.assign(document.createElement("link"),n))}var G=async()=>(await i("css")).map(t=>D(t.url));async function I(){G()}function H(t,n){let e={type:n==!0?"module":"",src:t,defer:!0};document.head.append(Object.assign(document.createElement("script"),e))}async function J(){(await i("script")).map(t=>{setTimeout(()=>H(t.url,t.module),1500)})}async function v(){J()}async function K(t){if(t.name&&t.url){let n={family:t.name,url:"url("+t.url+")"},e=new FontFace(n.family,n.url);e.load(),document.fonts.add(e)}}async function M(){(await i("font")).map(t=>K(t))}async function O(){M()}function S(){I(),O(),v()}var N=(navigator.language||navigator.userLanguage).split("-")[0],k=localStorage.getItem("lang:")??N;async function T(){try{return await o("lang/"+k+"_lang.json")}catch{console.log('"lang/'+k+'_lang.json" no exist')}}function A(t){localStorage.setItem("lang:",t)}function L(){localStorage.setItem("lang:","en")}function q(){localStorage.removeItem("lang:")}async function B(t){let n=await T(),e=t.getAttribute("onlang");return n?n=n[e]:n=e,t.innerText=n,t}function _(t){let n=document.createElement(t.element),e=t.class,a=t.id,r=t.content,w=t.text,y=t.onlang,x=t.src,$=t.href,F=t.type;if(e&&e.forEach(d=>{n.classList.add(d)}),a&&(n.id=a),x&&(n.src=x),$&&(n.href=$),F&&(n.type=F),w&&(n.innerText=w),y&&(n.setAttribute("onlang",y),B(n)),r)for(let d in r)n.append(_(r[d]));return n}function l(t,n){let e=Object.keys(t).find(r=>r.startsWith(n+"@")),a={};return t[n]?(a.legacy=!1,a.obj=t[n]):e&&(a.legacy=!0,a.legacy_name=e.split("@")[1],a.obj=t[e]),a}function Q(t,n){return t.class?n.class&&n.class.map(e=>t.class.push(e)):n.class&&(t.class=n.class),t}function R(t,n){if(t.content){if(n.content)for(let e in n.content)t.content[e]=n.content[e]}else n.content&&(t.content=n.content);return t}async function u(t,n){return n=await n.obj,Object.setPrototypeOf(t,n),t=Q(t,n),t=R(t,n),t}var U=t=>g(t,"@")?t.split("@")[0]:t;async function h(t){for(let n in t){let e=l(t,U(n));e.legacy&&(e.obj=await u(e.obj,await c(e.legacy_name))),t[n].content&&(t[n].content=await h(t[n].content)),t[n]=e.obj}return await t}async function c(t){t=E(t);let n=(await i("nm"))[t[0]];return t=await X(n,t),await t}async function V(t){return t=await t,t.legacy&&(t.obj=await u(t.obj,await c(t.legacy_name))),t.obj.content&&(t.obj.content=await h(t.obj.content)),t}async function X(t,n){let e=await o(t);return n=l(e,n[1]),n=V(n),n}function P(t,n){if(t.content)return l(t.content,n).obj}var f=(t,n)=>document.querySelector(n).append(_(t));async function m(t,n){return t=(await c(t)).obj,t}var p=class{constructor(n,e){this.elem=P(n,e)}onid(n){this.elem.id=n}onlang(n){this.elem.onlang=n}text(n){this.elem.text=n}src(n){this.elem.src=n}href(n){this.elem.href=n}type(n){this.elem.type=n}onclass(n){this.elem.class?n.forEach(e=>{this.elem.class.push(e)}):(this.elem.class=[],n.forEach(e=>{this.elem.class.push(e)}))}};async function W(t,n){f((await c(t)).obj,n)}async function C(){(await i("init")).forEach(async t=>{let n=await m(t);f(n,"#app")})}console.clear();C();S();window.$change_lang=A;window.$default_lang=L;window.$auto_lang=q;window.$add_ui=W;window.$dynamic_ui=p;window.$set_ui=m;window.$appd_ui=f;})();
//# sourceMappingURL=jsyoui.min.js.map
